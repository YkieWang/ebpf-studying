# ebpf对象生命周期：落地成盒？

我们已经知道bpf程序是事件驱动，当有事件触发的时候就会执行函数，那么当事件结束之后这一切就结束了？相对应的maps还在吗？如果我想要别的程序来问这个map该怎么办？如果我想卸载程序但是不希望map被销毁又该怎么办？下面我们就来探讨一下bpf对象的生命周期。

### **引用计数refcnt**

**BPF 对象（objects）包括**progs（BPF 程序）maps（kv 存储）debug info（调试信息），我们之前的文章中还介绍了每个对象在内核中对应的结构体，那么你一定会发现它们都有一个atomic64\_t refcnt变量，这就是引用计数。当引用计数为0的时候对象就会被回收，那么就让我们来看看不同的操作对引用计数有什么影响吧。

### 不同操作对引用计数的影响

这里推荐大家直接看这篇译文 [BPF 对象（BPF objects）的生命周期](https://arthurchiao.art/blog/lifetime-of-bpf-objects-zh/)\
